using Client.DTOs.Order;

namespace Client.Services
{

    public class OrderService : IOrderService
    {
        private static readonly Dictionary<string, decimal> SizeMultipliers = new()
        {
            { "Pequena", 1.0m },
            { "Média", 1.5m },
            { "Gigante", 2.5m }
        };


        private static readonly Dictionary<string, int> SliceCountBySize = new()
        {
            { "Pequena", 1 },
            { "Média", 2 },
            { "Gigante", 4 }
        };


        public decimal GetSizeMultiplier(string size)
        {
            if (!SizeMultipliers.TryGetValue(size, out var multiplier))
            {
                throw new ArgumentException($"Tamanho inválido: {size}. Use: Pequena, Média, Gigante");
            }
            return multiplier;
        }


        public int GetSliceCountBySize(string size)
        {
            if (!SliceCountBySize.TryGetValue(size, out var sliceCount))
            {
                throw new ArgumentException($"Tamanho inválido: {size}");
            }
            return sliceCount;
        }


        public decimal CalculateOrderProductTotal(List<(decimal flavorPrice, int sliceCount)> flavors, int quantity)
        {
            if (flavors.Count() == 0)
                throw new ArgumentException("Pelo menos um sabor é necessário");

            var singleUnitPrice = flavors.Sum(f => f.flavorPrice * f.sliceCount);

            return singleUnitPrice * quantity;
        }

        public void Create(CreateOrderDto createOrder)
        {
            throw new NotImplementedException();
        }
        public void Update(int orderId, UpdateOrderDto updateOrder)
        {
            throw new NotImplementedException();
        }
        public ResponseOrderDto Get()
        {
            throw new NotImplementedException();
        }
        public ResponseOrderDto GetById(int orderId)
        {
            throw new NotImplementedException();
        }

    }
}